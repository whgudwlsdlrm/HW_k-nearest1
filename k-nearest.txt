set.seed(1)
x <- sort(rnorm(100))
y <- 3 + x^2 + rnorm(100)
plot(x,y,pch = 20)

library(FNN)
abline(v = 0, col = 'black',lty = 2)
idx1 <- c(knnx.index(x,0,k = 1))
abline(h = mean(y[idx1]),col = 'red',lty = 1)
idx2 <- c(knnx.index(x,0, k = 5))
abline(h = mean(y[idx2]),col = 'green',lty = 1)
idx3 <- c(knnx.index(x,0,k = 30))
abline(h = mean(y[idx3]),col = 'blue',lty = 1)
legend("topright",c("k = 1","k = 5","k = 30"),col = c("red","green","blue"),lty = c(1,1,1))